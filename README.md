# ATM-System
Реализация системы банкомата с луковой архитектурой (Onion Architecture) с использованием ASP.NET Core Web API для управления счетами, сессиями и историей операций.

## Функциональные требования
- создание сессии
- создание счета
- просмотр баланса счета
- снятие денег со счета
- пополнение счета
- просмотр истории операций

Любые операции со счетом приводят к созданию записи в истории операций.

## Архитектура и нефункциональные требования
- **Луковая архитектура** с богатой доменной моделью. Связывание абстракций и реализаций через Microsoft.Extensions.DependencyInjection
- **Web API** реализован на ASP.NET Core с использованием контроллеров
- **Управление сессиями**:
  - Создание сессии возвращает ключ (Guid)
  - Пользовательская сессия: требует номер счета и пин-код
  - Админская сессия: требует системный пароль (параметризуется)
  - Все операции принимают ключ сессии для авторизации
- **Хранилище данных**: абстракция репозиториев позволяет использовать различные реализации
  - In-memory репозитории
  - PostgreSQL с чистыми SQL-запросами
- **Обработка ошибок**: при некорректных операциях возвращаются соответствующие HTTP коды (BadRequest, Unauthorized и др.)

## Тестирование
- **Снятие денег со счета**
  - При достаточном балансе - корректное обновление баланса
  - При недостаточном балансе - возврат ошибки
- **Пополнение счета**
  - Корректное обновление баланса

Тесты используют моки репозиториев и проверяют исключительно бизнес-логику, не завися от реализации хранения данных или представления.
